# Подробная информация о параметрах VideoWorker 

Список параметров из конфигурационного файла, которые могут быть изменены с помощью метода `FacerecService.Config.overrideParameter`:

* `max_processed_width` и `max_processed_height` – ограничить размер изображения, подаваемого во внутренний детектор новых лиц.
* `min_size` и `max_size` – минимальный и максимальные размер лица для детекции (размер определен для изображения, уже уменьшенного под ограничения `max_processed_width` и `max_processed_height`)
* `min_neighbors` – целочисленный параметр детектора. Обратите внимание на то, что большие значения требуют более высокой степени подтверждения детекции. Вы можете изменить этот параметр, исходя из ситуации, к примеру, увеличить значение, если наблюдается большое количество ложных детекций, и уменьшить значение, если большое количество лиц не детектируется. Не меняйте этот параметр, если вы не уверены.
* `min_detection_period` – вещественное число, означает минимальное время (в секундах) между двумя запусками внутреннего детектора. Используется для уменьшения нагрузки на процессор. Нулевое значение отключает ограничение. Большие значения увеличивают задержку обнаружения новых лиц.
* `max_detection_period` – целое число, означает максимальное время (в кадрах) между двумя запусками внутреннего детектора. Нулевое значение отключает ограничение. К примеру, если вы обрабатываете видео оффлайн, вы можете выставить значение `1`, чтобы не пропустить ни одного лица.
* `consecutive_match_count_for_match_found_callback` – целое число, означает количество последовательных совпадений трека с одним и тем же человеком из базы, которое будет расцениваться как верное совпадение. (см. также `VideoWorker.MatchFoundCallbackU`)
* `recognition_yaw_min_threshold`, `recognition_yaw_max_threshold`, `recognition_pitch_min_threshold` и `recognition_pitch_max_threshold` – вещественные числа, означают ограничения ориентации лиц для сравнения с базой.
* `min_tracking_face_size` – вещественное число, означает минимальный размер отслеживаемого лица.
* `max_tracking_face_size` – вещественное число, означает максимальный размер отслеживаемого лица. Неположительное значение отключает это ограничение.
* `min_template_generation_face_size` – вещественное число, означает минимальный размер лица для генерации шаблона. Лица меньшего размера будут отмечены флагом `weak = true`.
* `single_match_mode` – целое число, `1` означает, что режим однократного распознавания включен, `0` – выключен. Если режим включен, то трек, однажды распознанный как человек из базы, больше не будет генерировать шаблоны и сравниваться с базой.
* `delayed_samples_in_tracking_callback` – целое число, `1` – включен, `0` – выключен. Внутренний детектор, который обнаруживает новые лица, не успевает отрабатывать все кадры, соответственно, некоторые сэмплы могут быть получены с задержкой. В случае, если выбрано значение параметра `1`, все задержанные сэмплы будут передаваться в `VideoWorker.TrackingCallbackU`, иначе задержанные сэмплы будут появляться, только если в противном случае будет нарушен порядок вызова коллбэков (т.е. сэмпл трека должен появиться хотя бы один раз в `TrackingCallback` перед вызовом `TrackingLostCallback` для этого трека). Используйте метод `RawSample.getFrameID`, чтобы определить, к какому кадру фактически относится сэмпл.
* `weak_tracks_in_tracking_callback` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг выключен, и сэмплы с флагом `weak = true` не передаются в *Tracking*-коллбэк, если на момент их создания не существовало сэмплов с таким же `track_id` (`track_id = sample.getID()`) с флагом `weak = false`. Если флаг `weak_tracks_in_tracking_callback` включен, то в *Tracking*-коллбэк передаются все сэмплы, поэтому *TrackingLost*-коллбэк может быть вызван с `best_quality_sample = NULL`.
* `search_k` – целое число, означает максимальное количество элементов, возвращаемых в коллбэке `VideoWorker.MatchFoundCallbackU`, т.е. это параметр `k`, передаваемый внутри в `Recognizer.search`.
* `processing_queue_size_limit` – целое число, означает максимальный размер очереди сэмплов на создание шаблонов. Служит для ограничения потребления памяти в случаях, когда новые лица появляются быстрее, чем создаются шаблоны.
* `matching_queue_size_limit` – целое число, означает максимальный размер очереди шаблонов на сравнение с базой. Служит для ограничения потребления памяти в случаях когда новые шаблоны появляются быстрее, чем сравниваются с базой (это может происходить при очень большой базе).
* `recognizer_processing_less_memory_consumption` – целое число, которое будет передано в качества значения флага `processing_less_memory_consumption` в методе `FacerecService.createRecognizer` для создания распознавателя.
* `not_found_match_found_callback` – целое число, `1` – включен, `0` – выключен вызов `VideoWorker.MatchFoundCallbackU` после `N` последовательных несовпадений.
* `depth_data_flag` – целое число, `1` – включен режим работы с кадрами глубины для подтверждения *liveness* (принадлежности лица реальному человеку) при распознавании, `0` – выключен. Все переопределенные параметры с префиксом `depth_liveness.` в имени пробрасываются в конфигурационный файл для `DepthLivenessEstimator`, префикс удаляется из имени. Если необходимо переопределить параметр `paramname` для `DepthLivenessEstimator`, требуется переопределить параметр `depth_liveness.paramname` для `VideoWorker`. См. `FacerecService.Config.overrideParameter`.
* `timestamp_distance_threshold_in_microsecs` – максимальная допустимая разница между временными метками цветного изображения и соответствующего кадра глубины в микросекундах. Используется, если включен параметр `depth_data_flag`.
* `max_frames_number_to_synch_depth` – максимальный размер очереди при синхронизации данных глубины. Используется, если включен параметр `depth_data_flag`.
* `max_frames_queue_size` – максимальный размер очереди кадров, используемых трекером. При включенном параметре `depth_data_flag` рекомендуемое значение: `max(3, rgbFPS / depthFPS)`.
* `offline_work_i_e_dont_use_time` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг выключен. При включении проверка по `max_detector_confirm_wait_time` не производится. Также вместо `max_occlusion_time_wait` используется `max_occlusion_count_wait`.
* `max_occlusion_time_wait` – вещественное число в секундах. Когда трекер обнаруживает перекрытие лица, он удерживает позицию лица и пытается отследить его на новых кадрах в течение этого времени.
* `max_occlusion_count_wait` – целое число. Означает то же, что и `max_occlusion_time_wait`, но в этом случае время измеряется в количестве кадров, а не в секундах. Используется, только когда установлен флаг `offline_work_i_e_dont_use_time`.
* `fda_max_bad_count_wait` – целое число. Когда `fda_tracker` обнаруживает снижение качества лица, он пытается отследить это лицо с помощью трекера общего назначения (вместо алгоритма *fda*, разработатнного для лиц) в течение не более `fda_max_bad_count_wait` кадров.
* `base_angle` – целое число: `0`, `1`, `2` или `3`. Ориентация камеры: `0` – стандартная, `1` означает +90 градусов, `2` означает -90 градусов, `3` означает 180 градусов.
* `fake_detections_cnt` – целое число. Количество стартовых позиций для поиска лиц при конфигурации `video_worker_fdatracker_fake_detector.xml`.
* `fake_detections_period` – целое число. Каждая стартовая позиция будет использоваться раз в `fake_detections_period` кадров.
* `fake_rect_center_xN`, `fake_rect_center_yN`, `fake_rect_angleN`, `fake_rect_sizeN` – вещественные числа. Параметры стартовых позиций. `N` от `0` до `fake_detections_cnt – 1` включительно. `fake_rect_center_xN` – *x* координата центра относительно ширины изображения. `fake_rect_center_yN` – *y* координата центра относительно высоты изображения. `fake_rect_angleN` – угол *roll* в градусах. `fake_rect_sizeN` – размер относительно *max*(ширина изображения, высота изображения).
* `downscale_rawsamples_to_preferred_size` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг включен. Когда флаг включен, *Capturer* уменьшает все образцы до предпочтительного размера (см. `RawSample.downscaleToPreferredSize`) в целях уменьшения потребления памяти, что приводит к снижению производительности. Рекомендуется отключать `downscale_rawsamples_to_preferred_size` и использовать `RawSample.downscaleToPreferredSize` вручную для образцов, которые вам нужно сохранить или в течение длительного времени удерживать в оперативной памяти.
* `squeeze_match_found_callback_groups` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг выключен. Когда трек в первый раз получает `N` последовательных совпадений с одним и тем же человеком из базы, все `N` совпадений будут отправлены (`N` = значение `consecutive_match_count_for_match_found_callback`). т.е. будет произведено `N` последовательных вызовов `MatchFoundCallback`. Но если `squeeze_match_found_callback_groups` включен, то будет отправлено только одно совпадение с минимальным расстоянием до базы.
* `debug_log_enabled` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг выключен. Также этот флаг можно включить, установив значение `1` в переменную окружения `FACE_SDK_VIDEOWORKER_DEBUG_LOG_ENABLED`. Если этот флаг включен, то `VideoWorker` логирует результаты работы в `std::clog`.
* `need_stable_results` – целое число, `1` – включен, `0` – выключен. По умолчанию этот флаг выключен. Используется для генерирации одинаковых разультатов при работе с одинаковыми данными. Отключает несколько оптимизаций, которые могут давать несколько отличающиеся результаты из-за нестабильного порядка многопоточного выполнения операций. Также включается флаг `offline_work_i_e_dont_use_time` и значение `max_detection_period` устанавливается в `1`, отключается пропуск кадров (отключает ограничение от `max_frames_queue_size`).
